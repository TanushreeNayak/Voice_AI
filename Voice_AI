from asyncio.windows_events import NULL
from tkinter import *
from  tkinter import  ttk
#importing connection


#defining register function
def register():
	name1=UserName.get()
	con1=Password.get()
	gen1=gender.get()
	if name1=='' or con1=='':
		message.set("fill the empty field!!!")
	else:
		cursor = conn.cursor()
		n_row = 0
		# Preparing SQL query to INSERT a record into the database.
		Select_stmt = ("select  Count(1) from users where username =  '%s' and password = '%s';" % (name1,con1))
		
		try:
			cursor.execute(Select_stmt)
			col=cursor.fetchall()
			for x in col:
				n_row = x[0]
				print(n_row)
		   	
			if n_row > 0:
				print("Login Successfull")
				message.set("Login Successfull..!!")
			else:
				print("Login Filed")	   
				message.set("Login Filed")
				reg_screen.destroy()
				NoNeedToProceed = 1
		except IndexError as e:
			message.set("Not Successfull")
			print(e)
def QuizUI():
	reg_screen.destroy()
	subprocess.call("Quiz Game.py", shell=True)
def Registrationform():
	global reg_screen
	reg_screen = Tk()
	reg_screen.title("Login To Healthcare Assisstent")
	reg_screen.geometry("350x400")
	global  message;
	global UserName
	global Password
	global gender
	global NoNeedToProceed 
	NoNeedToProceed = IntVar()
	UserName = StringVar()
	Password = StringVar()
	gender=IntVar()
	message=StringVar()
	Label(reg_screen,width="300", text="Please enter details below", bg="orange",fg="white").pack()
	Label(reg_screen, text="UserName * ").place(x=20,y=40)
	Entry(reg_screen, textvariable=UserName).place(x=90,y=42)
	Label(reg_screen, text="Password * ").place(x=20,y=80)
	Entry(reg_screen, textvariable=Password,show = "*").place(x=90,y=82)
	Label(reg_screen, text="",textvariable=message).place(x=95,y=264)
	Btn1 = Button(reg_screen, text="Login", width=10, height=1, bg="green",command=register)
	Btn1.place(x=90,y=300)
	if NoNeedToProceed == 0:
		Btn1.bind("<Button-1>", lambda e:
		QuizUI())
	reg_screen.mainloop()
#calling function Registrationform
Registrationform()
